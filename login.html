<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Charity Jet | Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css" integrity="sha384-6pzBo3FDv/PJ8r2KRkGHifhEocL+1X2rVCTTkUfGk7/0pbek5mMa1upzvWbrUbOZ" crossorigin="anonymous">
</head>
<body>
    <nav class="nav nav_top">
        <div class="logo">
            <a href="/"><img src="images/logo.png" width="250"></a>
        </div>
        <div class="nav_side">
            <a href="/">HOME</a>
            <a href="/about">ABOUT US</a>
            <a href="/donate">DONATE</a>
            <a href="/contact">CONTACT</a>
            <a href="/DonationHistory">Donation History</a>
            <a href="/login" id="navLogin">LOGIN</a>
            <a href="/signup" id="navSignup">SIGN UP</a>
            <a href="#" id="navLogout" style="display:none">LOG OUT</a>
        </div>
    </nav>
    <div class="contact_container" style="padding-top:120px;max-width:700px;margin:0 auto">
        <h2>Login</h2>
        <form id="loginForm" class="form" autocomplete="on">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" name="password" required>
            </div>
            <div id="msg" class="small-muted" style="color:#fff;margin-bottom:10px"></div>
            <button type="submit" class="btn btn-primary">Login</button>
            <p style="margin-top:10px">No account? <a href="/signup">Sign up</a></p>
        </form>
    </div>
    <footer>
        <div class="pages">
            <a href="/"><img class="aimg" src="images/logo.png" width="250"></a>
            <p>Charity Jet cares for needy children by empowering their caregivers to do their best work, with compassion, grace, integrity and excellence.</p>
            <a href="https://www.facebook.com/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a href="https://www.linkedin.com/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
            <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
            <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
        <div class="doc">
            <h3>Navigation</h3>
            <a href="/">Home</a>
            <a href="/about">About</a>
            <a href="/donate">Donate</a>
            <a href="/contact">Contact</a>
            <a href="/DonationHistory">Donation History</a>
        </div>
        <div class="contact">
            <h3>Contact Us</h3>
            <a href="/contact" target="_blank">Techno Main Salt Lake, Kolkata, West Bengal-700106</a>
            <a href="tel: +91 87458 26458">+91 87458 26458</a>
            <a href="mailto: ppppppp@gmail.com">charityjet@gmail.com</a>
        </div>
        <div class="social">
            <h3>Support</h3>
            <p>Help us shape a better future for children all over the world</p>
            <div class="side_btn">
                <a href="/donate">JOIN US TODAY</a>
            </div>
        </div>
        <hr>
        <p>Copyright &copy; 2025 Charity Jet. All rights reserved.</p>
    </footer>
    <script>
    (function(){
      function getAuth(){try{return JSON.parse(localStorage.getItem('authUser')||'null');}catch(e){return null}}
      function setNav(){
        var u=getAuth();
        var login=document.getElementById('navLogin');
        var signup=document.getElementById('navSignup');
        var logout=document.getElementById('navLogout');
        if(u){if(login)login.style.display='none';if(signup)signup.style.display='none';if(logout)logout.style.display='inline-block'}else{if(login)login.style.display='inline-block';if(signup)signup.style.display='inline-block';if(logout)logout.style.display='none'}
        if(logout){logout.onclick=function(e){e.preventDefault();localStorage.removeItem('authUser');setNav()}}
      }
      if(document.readyState==='loading')document.addEventListener('DOMContentLoaded',setNav);else setNav()
    })()
    </script>
    <script>
    async function hash(s){const d=new TextEncoder().encode(s);const b=await crypto.subtle.digest('SHA-256',d);return Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,'0')).join('')}
    function getUsers(){try{return JSON.parse(localStorage.getItem('users')||'[]')}catch(e){return[]}}
    function setAuth(u){localStorage.setItem('authUser',JSON.stringify(u))}
    document.getElementById('loginForm').addEventListener('submit',async function(ev){
      ev.preventDefault()
      var email=document.getElementById('email').value.trim().toLowerCase()
      var password=document.getElementById('password').value
      var msg=document.getElementById('msg')
      var users=getUsers()
      var u=users.find(x=>x.email===email)
      if(!u){msg.textContent='Invalid email or password';return}
      var h=await hash(password)
      if(u.passwordHash!==h){msg.textContent='Invalid email or password';return}
      setAuth({email:u.email,name:u.name})
      window.location.href='/'
    })
    </script>
</body>
</html>
